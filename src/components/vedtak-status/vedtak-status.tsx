import './vedtak-status.less'

import { Element, Normaltekst } from 'nav-frontend-typografi'
import Veilederpanel from 'nav-frontend-veilederpanel'
import React, { useEffect, useState } from 'react'

import { useAppStore } from '../../data/stores/app-store'
import { tilLesbarDatoMedArstall } from '../../utils/dato-utils'
import { tekst } from '../../utils/tekster'
import Vis from '../vis'

const VedtakStatus = () => {
    const status = true
    const [ behandletDato, setBehandletDato ] = useState<string>()
    const { valgtVedtak } = useAppStore()

    useEffect(() => {
        opprettDatoer()
        // eslint-disable-next-line
    }, [ valgtVedtak ])

    const opprettDatoer = () => {
        const behandlet = valgtVedtak?.opprettet
        if (behandlet) {
            setBehandletDato(tilLesbarDatoMedArstall(behandlet))
        }
    }

    return (
        <Vis hvis={status}>
            <section className="vedtak-status">
                <Veilederpanel kompakt svg={
                    <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g filter="url(#filter0_d)">
                            <path fillRule="evenodd" clipRule="evenodd" d="M45 85C67.0914 85 85 67.0914 85 45C85 22.9086 67.0914 5 45 5C22.9086 5 5 22.9086 5 45C5 67.0914 22.9086 85 45 85Z" fill="white" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M45 85C67.0914 85 85 67.0914 85 45C85 22.9086 67.0914 5 45 5C22.9086 5 5 22.9086 5 45C5 67.0914 22.9086 85 45 85Z" stroke="#E0F5FB" />
                        </g>
                        <mask id="mask0" mask-type="alpha" maskUnits="userSpaceOnUse" x="4" y="4" width="82" height="82">
                            <path fillRule="evenodd" clipRule="evenodd" d="M45 85C67.0914 85 85 67.0914 85 45C85 22.9086 67.0914 5 45 5C22.9086 5 5 22.9086 5 45C5 67.0914 22.9086 85 45 85Z" fill="white" stroke="white" />
                        </mask>
                        <g mask="url(#mask0)">
                            <path fillRule="evenodd" clipRule="evenodd" d="M59.7891 43.0526C58.4647 47.335 55.8718 50.8897 52.5489 53.065L52.7191 54.9721L52.7181 55.0496L50.9218 70.7692H39.5295L39.4822 70.439L37.2798 55.0226L37.3613 53.0944C34.0216 50.9248 31.414 47.3643 30.0821 43.0705C30.0369 43.0748 29.9911 43.0769 29.9449 43.0769C29.0833 43.0769 28.4007 42.3267 28.4007 41.4179V36.2752C28.4007 35.666 28.7074 35.1277 29.1691 34.8391C29.8894 25.2381 36.6564 17.6923 44.9325 17.6923C53.1863 17.6923 59.9396 25.1974 60.6907 34.7612C61.2298 35.0223 61.5993 35.6057 61.5993 36.2752V41.4179C61.5993 42.3272 60.9177 43.0769 60.0551 43.0769C59.9643 43.0769 59.8754 43.0686 59.7891 43.0526Z" fill="#E7E9E9" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M52.1477 53.5971C52.0829 57.03 48.9076 60.5518 45 60.5518C41.0754 60.5518 37.8895 56.9993 37.8517 53.5523C35.8182 54.0659 32.7142 55.6146 30.1522 58.2029C27.6712 60.7093 25.6985 64.4767 25.6985 67.3993V85H64.3015V67.3993C64.3015 64.4708 62.2862 60.6969 59.7594 58.1876C57.2326 55.6784 54.1941 54.1506 52.1477 53.5971Z" fill="#0C5EA8" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M37.7233 53.6715C35.8502 54.3491 32.708 55.83 30.3309 58.079C23.3824 56.5385 20.2941 52.8777 20.2941 52.8777C20.2941 52.8777 26.6959 46.6562 26.6998 35.7746V35.7631C26.6998 23.0215 33.6038 14.2308 44.9784 14.2308C56.3545 14.2308 63.2585 23.0215 63.2585 35.7631H63.2994C63.2994 46.6523 69.7059 52.8777 69.7059 52.8777C69.7059 52.8777 66.6176 56.5385 59.6691 58.0769L59.6586 58.079C57.3627 55.998 54.0327 54.393 52.2211 53.7144L52.2232 53.7137L52.1512 52.9071L52.1901 52.8403C55.6084 50.6617 58.2608 46.9916 59.5396 42.5567C59.6961 42.6435 59.8729 42.6923 60.06 42.6923C60.7002 42.6923 61.2182 42.123 61.2182 41.4179V36.2752C61.2182 35.6718 60.839 35.1674 60.3285 35.0343C60.328 35.0274 60.3275 35.0204 60.3271 35.0135C44.1653 36.8103 38.3436 25.7699 37.8657 25.7692C37.8657 25.7692 32.4984 29.6154 29.9332 34.1882C29.9332 34.1882 29.5423 35.0514 29.5404 35.0805C29.1012 35.2614 28.7879 35.7276 28.7879 36.2752V41.4179C28.7879 42.123 29.3073 42.6923 29.9462 42.6923C30.0877 42.6923 30.2234 42.6645 30.3487 42.6135C31.6416 47.0504 34.3108 50.7166 37.7451 52.8808L37.7579 52.9071L37.7255 53.6715H37.7233Z" fill="#C86151" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M39.4801 38.747C38.4825 38.8275 38.2032 37.2537 38.5038 36.2259C38.5604 36.0311 38.8906 35.1442 39.4753 35.1442C40.0592 35.1442 40.3171 35.629 40.3529 35.7124C40.7824 36.7143 40.5715 38.6585 39.4801 38.747Z" fill="#3E3832" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M51.0507 38.747C52.0484 38.8275 52.3276 37.2537 52.027 36.2259C51.9704 36.0311 51.6402 35.1442 51.0556 35.1442C50.4716 35.1442 50.2137 35.629 50.1779 35.7124C49.7484 36.7143 49.9593 38.6585 51.0507 38.747Z" fill="#3E3832" />
                            <path d="M45.6352 40.298C46.2318 40.1962 46.6392 40.2601 46.7851 40.4586C47.3359 41.209 47.1597 42.0029 46.2148 42.6546C45.718 42.9971 45.0342 43.1177 44.6722 42.9401C44.4951 42.8532 44.2881 42.9419 44.2098 43.1382C44.1314 43.3344 44.2114 43.5639 44.3885 43.6508C44.9868 43.9443 45.9069 43.7821 46.5851 43.3145C47.8692 42.4289 48.1631 41.1046 47.3288 39.9679C46.9757 39.4875 46.3508 39.3895 45.5285 39.5298C45.3372 39.5625 45.206 39.7609 45.2354 39.973C45.2649 40.1851 45.4439 40.3306 45.6352 40.298Z" fill="#3E3832" />
                            <path d="M49.9494 45.4552C49.9144 45.5292 49.834 45.6708 49.7049 45.8574C49.4863 46.1732 49.2118 46.4898 48.8784 46.7851C47.885 47.6649 46.5919 48.1736 44.9461 48.1271C43.3414 48.0817 42.054 47.5808 41.0448 46.7731C40.6742 46.4765 40.3683 46.1589 40.1237 45.8424C39.9795 45.6557 39.8895 45.5141 39.8501 45.4404C39.7554 45.263 39.5225 45.1899 39.3301 45.2772C39.1376 45.3646 39.0583 45.5792 39.1531 45.7566C39.2101 45.8634 39.3212 46.038 39.4909 46.2577C39.7695 46.6185 40.1161 46.9782 40.5354 47.3138C41.6748 48.2256 43.1309 48.7922 44.9223 48.8428C46.7878 48.8956 48.2791 48.3088 49.4167 47.3014C49.797 46.9646 50.1097 46.604 50.3598 46.2425C50.512 46.0228 50.6109 45.8484 50.6614 45.7417C50.7472 45.5605 50.6574 45.3495 50.4608 45.2704C50.2642 45.1912 50.0353 45.274 49.9494 45.4552Z" fill="#3E3832" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M36.3027 14.0597C38.9054 12.6963 41.8493 11.923 44.9709 11.923C48.2812 11.923 51.3939 12.7875 54.1087 14.3084V14.6088C59.1002 17.5205 62.4768 22.7457 62.6379 28.7421H63.7016C64.4562 28.7421 65.0735 29.3384 65.0735 30.0672V41.937C65.0735 42.6658 64.4562 43.2622 63.7016 43.2622L63.0496 43.2622C61.7898 47.3382 55.8496 50.443 48.652 50.5436V50.9814C48.652 51.499 48.2138 51.923 47.678 51.923H42.2645C41.7279 51.923 41.2897 51.499 41.2897 50.9814V48.9593C41.2897 48.4417 41.7279 48.0176 42.2645 48.0176H47.678C48.2138 48.0176 48.652 48.4417 48.652 48.9593V49.6518C54.5123 49.0703 59.3278 46.5828 61.3482 43.2622H60.7536C59.999 43.2622 59.3817 42.6658 59.3817 41.937V30.0672C59.3817 29.3384 59.999 28.7421 60.7536 28.7421H61.4415C60.695 23.9048 57.9554 19.744 54.1087 17.1647V17.1949C51.4278 15.4761 48.3063 14.4861 44.9709 14.4861C41.8284 14.4861 38.8755 15.3631 36.3027 16.901V16.8611C32.2099 19.4102 29.2766 23.7102 28.5001 28.7421H29.2464C30.001 28.7421 30.6183 29.3384 30.6183 30.0672V41.937C30.6183 42.6658 30.001 43.2622 29.2464 43.2622H26.2984C25.5438 43.2622 24.9265 42.6658 24.9265 41.937V30.0672C24.9265 29.3384 25.5438 28.7421 26.2984 28.7421H27.3036C27.4698 22.5594 31.054 17.1965 36.3027 14.3441V14.0597Z" fill="#3E3832" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M58.9563 77.5H46.0429C45.4666 77.5 45 77.0263 45 76.4412V69.3929C45 68.8078 45.4666 68.3333 46.0429 68.3333H58.9563C59.5326 68.3333 60 68.8078 60 69.3929V76.4412C60 77.0263 59.5326 77.5 58.9563 77.5Z" fill="white" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M53.2759 69.7883H51.9377C51.8386 69.7883 51.7587 69.7089 51.7587 69.6102V69.3858C51.7587 69.2879 51.8386 69.2077 51.9377 69.2077H53.2759C53.375 69.2077 53.4549 69.2879 53.4549 69.3858V69.6102C53.4549 69.7089 53.375 69.7883 53.2759 69.7883Z" fill="#3E3832" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M52.2194 69.5833H52.9947V67.5H52.2194V69.5833Z" fill="#78706A" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M52.6586 75.8313C51.0487 75.8313 49.7433 74.526 49.7433 72.9159C49.7433 71.3056 51.0487 70 52.6586 70C54.2691 70 55.5746 71.3056 55.5746 72.9159C55.5746 74.526 54.2691 75.8313 52.6586 75.8313Z" fill="#C30000" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M48.3333 74.1889L48.9293 72.714H49.5019L48.9067 74.1889H48.3333Z" fill="#C30000" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M55.6869 74.1889L56.2752 72.714H56.5874L55.9991 74.1889H55.6869Z" fill="#C30000" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M56.8439 74.1889L57.4321 72.714H57.5979L57.0096 74.1889H56.8439Z" fill="#C30000" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M55.1456 72.714H54.6273C54.6273 72.714 54.5916 72.714 54.5789 72.7456L54.2921 73.6236L54.0055 72.7456C53.9929 72.714 53.9569 72.714 53.9569 72.714H52.9604C52.9388 72.714 52.9207 72.732 52.9207 72.7535V73.0517C52.9207 72.8151 52.669 72.714 52.5216 72.714C52.1916 72.714 51.9706 72.9314 51.9018 73.2619C51.8981 73.0427 51.8799 72.9641 51.8208 72.8836C51.7937 72.8442 51.7545 72.8111 51.7118 72.7837C51.6239 72.7322 51.5449 72.714 51.3753 72.714H51.1761C51.1761 72.714 51.1401 72.714 51.1274 72.7456L50.9461 73.1947V72.7535C50.9461 72.732 50.9282 72.714 50.9066 72.714H50.4457C50.4457 72.714 50.4101 72.714 50.3972 72.7456L50.2088 73.2126C50.2088 73.2126 50.1899 73.2593 50.2329 73.2593H50.4101V74.1493C50.4101 74.1714 50.4275 74.1889 50.4497 74.1889H50.9066C50.9282 74.1889 50.9461 74.1714 50.9461 74.1493V73.2593H51.1242C51.2264 73.2593 51.2481 73.2621 51.2878 73.2806C51.3118 73.2897 51.3334 73.308 51.3451 73.3291C51.3692 73.3744 51.3753 73.4289 51.3753 73.5895V74.1493C51.3753 74.1714 51.393 74.1889 51.4149 74.1889H51.8529C51.8529 74.1889 51.9024 74.1889 51.922 74.14L52.019 73.9001C52.1481 74.0809 52.3605 74.1889 52.6245 74.1889H52.6822C52.6822 74.1889 52.732 74.1889 52.7517 74.14L52.9207 73.7214V74.1493C52.9207 74.1714 52.9388 74.1889 52.9604 74.1889H53.4074C53.4074 74.1889 53.4567 74.1889 53.4766 74.14C53.4766 74.14 53.6554 73.6961 53.656 73.6927H53.6563C53.6632 73.6558 53.6165 73.6558 53.6165 73.6558H53.457V72.8941L53.959 74.14C53.9786 74.1889 54.028 74.1889 54.028 74.1889H54.5562C54.5562 74.1889 54.6059 74.1889 54.6255 74.14L55.1821 72.7618C55.2013 72.714 55.1456 72.714 55.1456 72.714ZM52.9207 73.6558H52.6204C52.5009 73.6558 52.4036 73.559 52.4036 73.4394C52.4036 73.3199 52.5009 73.2225 52.6204 73.2225H52.7044C52.8236 73.2225 52.9207 73.3199 52.9207 73.4394V73.6558Z" fill="white" />
                        </g>
                        <defs>
                            <filter id="filter0_d" x="0.5" y="0.5" width="89" height="89" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
                                <feFlood floodOpacity="0" result="BackgroundImageFix" />
                                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
                                <feOffset />
                                <feGaussianBlur stdDeviation="2" />
                                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
                                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
                            </filter>
                        </defs>
                    </svg>
                }>
                    <Element tag="h2" className="vedtak-status__tittel">
                        {tekst('vedtak.status.tittel')}
                    </Element>
                    <Normaltekst>
                        {tekst('vedtak.status.behandlet')} {behandletDato}
                    </Normaltekst>
                </Veilederpanel>
            </section>
        </Vis>
    )
}

export default VedtakStatus
